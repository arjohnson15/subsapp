<!-- Simple Working Management Page -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h2 style="color: #4fc3f7;">üõ†Ô∏è Management Tools</h2>
    <div style="display: flex; gap: 10px;">
        <button class="btn" onclick="Management.showAddForm()">Add New Tool</button>
        <button class="btn btn-secondary" onclick="Management.refreshTools()">Refresh</button>
    </div>
</div>

<div style="background: rgba(255, 255, 255, 0.05); border-radius: 8px; padding: 15px; margin-bottom: 20px;">
    <span style="color: #4fc3f7; font-weight: 600;" id="toolCount">Loading tools...</span>
</div>

<div class="management-tools-grid" id="managementToolsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 25px;">
    <div style="text-align: center; color: #4fc3f7; padding: 40px;">
        <h3>Loading management tools...</h3>
    </div>
</div>

<!-- Add Tool Modal -->
<div id="addToolModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
    <div style="background: #1a1a2e; border-radius: 15px; padding: 30px; max-width: 500px; width: 90%;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="color: #4fc3f7; margin: 0;" id="modalTitle">Add New Tool</h2>
            <button onclick="ManagementSystem.closeModal()" style="background: none; border: none; color: #90a4ae; font-size: 24px; cursor: pointer;">&times;</button>
        </div>
        
        <form onsubmit="ManagementSystem.saveTool(event)">
            <div style="margin-bottom: 15px;">
                <label style="display: block; color: #e0e0e0; margin-bottom: 5px;">Tool Name *</label>
                <input type="text" id="toolName" required style="width: 100%; padding: 10px; border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; background: rgba(255,255,255,0.05); color: #e0e0e0;" placeholder="e.g., Radarr, Sonarr">
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; color: #e0e0e0; margin-bottom: 5px;">URL *</label>
                <input type="url" id="toolUrl" required style="width: 100%; padding: 10px; border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; background: rgba(255,255,255,0.05); color: #e0e0e0;" placeholder="http://192.168.1.100:8080">
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; color: #e0e0e0; margin-bottom: 5px;">Category</label>
                <select id="toolCategory" style="width: 100%; padding: 10px; border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; background: rgba(255,255,255,0.05); color: #e0e0e0;">
                    <option value="">No Category</option>
                    <option value="media">Media</option>
                    <option value="iptv">IPTV</option>
                    <option value="monitoring">Monitoring</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; color: #e0e0e0; margin-bottom: 5px;">Notes</label>
                <textarea id="toolNotes" rows="3" style="width: 100%; padding: 10px; border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; background: rgba(255,255,255,0.05); color: #e0e0e0; resize: vertical;" placeholder="Any notes or instructions..."></textarea>
            </div>
            
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button type="button" onclick="ManagementSystem.closeModal()" style="padding: 10px 20px; background: rgba(255,255,255,0.1); color: #e0e0e0; border: none; border-radius: 6px; cursor: pointer;">Cancel</button>
                <button type="submit" style="padding: 10px 20px; background: linear-gradient(135deg, #4fc3f7, #29b6f6); color: white; border: none; border-radius: 6px; cursor: pointer;">Save Tool</button>
            </div>
        </form>
    </div>
</div>

<!-- Iframe Modal -->
<div id="iframeModal" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); z-index: 1001;">
    <div style="width: 100%; height: 100%; display: flex; flex-direction: column;">
        <div style="background: #1a1a2e; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #444;">
            <h3 style="color: #4fc3f7; margin: 0;" id="iframeTitle">Tool</h3>
            <div style="display: flex; gap: 10px;">
                <button onclick="Management.refreshIframe()" style="background: rgba(255,255,255,0.1); color: #e0e0e0; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">Refresh</button>
                <button onclick="Management.openCurrentToolInNewTab()" style="background: rgba(255,255,255,0.1); color: #e0e0e0; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">New Tab</button>
                <button onclick="Management.closeIframeModal()" style="background: rgba(255,255,255,0.1); color: #e0e0e0; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">Close</button>
            </div>
        </div>
        <div style="flex: 1; position: relative;">
            <div id="iframeLoader" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #1a1a2e; display: flex; align-items: center; justify-content: center; z-index: 10;">
                <div style="text-align: center; color: #4fc3f7;">
                    <div style="width: 40px; height: 40px; border: 4px solid rgba(79,195,247,0.3); border-top: 4px solid #4fc3f7; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
                    <p>Loading tool...</p>
                </div>
            </div>
            <iframe id="toolIframe" style="width: 100%; height: 100%; border: none; background: white; display: none;"></iframe>
        </div>
    </div>
</div>

<style>
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
.tool-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(79, 195, 247, 0.15);
}
</style>